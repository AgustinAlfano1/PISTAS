<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Juego de Memoria</title>
<link rel="icon" href="data:image/svg+xml,
<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22>
<text y=%22.9em%22 font-size=%2290%22>üéÑ</text>
</svg>">
  
<style>
body{
  margin:0;
  min-height:100vh;
  font-family:Arial, sans-serif;
  background-image:url("fondo-memoria.jpg");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* CONTENEDOR */
.contenedor{
  background:white;
  padding:20px;
  border-radius:18px;
  max-width:560px;
  width:95%;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
  z-index:2;
}

/* TABLERO */
.tablero{
  display:grid;
  grid-template-columns: repeat(8, 1fr);
  gap:10px;
  margin-top:15px;
}

/* CARTAS */
.carta{
  position:relative;
  width:100%;
  padding-top:140%;
  perspective:900px;
}

.inner{
  position:absolute;
  inset:0;
  transition:transform .6s ease, box-shadow .6s ease;
  transform-style:preserve-3d;
  border-radius:14px;
  box-shadow:0 4px 8px rgba(0,0,0,.25);
}

.carta.volteada .inner{
  transform:rotateY(180deg);
  box-shadow:0 10px 18px rgba(0,0,0,.45);
}

.carta:not(.bloqueada):hover .inner{
  box-shadow:0 0 14px rgba(255,215,0,.8);
}

.carta.seleccionada .frente{
  background:#66bb6a;
}

.carta.bloqueada{
  pointer-events:none;
}

.cara{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  border-radius:14px;
  backface-visibility:hidden;
  border:1px solid rgba(0,0,0,.15);
}

.atras{
  background-image:url("carta.jpg");
  background-size:cover;
  background-position:center;
}

.frente{
  background:#fff;
  transform:rotateY(180deg);
}

/* ANIMACION ACIERTO */
@keyframes acierto{
  0%{transform:scale(1);}
  50%{transform:scale(1.1);}
  100%{transform:scale(1);}
}

.carta.acertada .inner{
  animation:acierto .6s ease;
  box-shadow:0 0 20px rgba(76,175,80,.9);
}

/* MODALES */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:5000;
}

.modal{
  background:white;
  padding:22px;
  border-radius:18px;
  max-width:420px;
  text-align:center;
  opacity:0;
  transform:translateY(20px);
  transition:opacity 1s ease, transform 1s ease;
}

.modal.visible{
  opacity:1;
  transform:translateY(0);
}

.modal button{
  margin-top:15px;
  padding:10px 22px;
  font-size:16px;
  cursor:pointer;
}

/* CONFETI */
.confeti{
  position:fixed;
  width:8px;
  height:8px;
  background:red;
  top:-10px;
  animation:caer linear forwards;
  z-index:3000;
}

@keyframes caer{
  to{
    transform:translateY(110vh) rotate(720deg);
    opacity:0;
  }
}
</style>
</head>

<body>

<!-- INICIO -->
<div class="overlay" id="overlayInicio">
  <div class="modal visible">
    <p>
      Hola Jime, como estas?<br><br>
      Me contaron que ya tenes tus sospechas de quien sos, y estas bastante errada,
      por eso y considerando que la semana que viene es la ultima vengo a orientarte
      un poco mas con esta pista!!<br><br>
      Pero antes de esto deberas ganar el siguiente juego de memoria!! ü§Ø<br><br>
      Buena suerte!!
    </p>
    <button onclick="comenzar()">Comenzar</button>
  </div>
</div>

<!-- FINAL -->
<div class="overlay" id="overlayFinal" style="display:none;">
  <div class="modal" id="modalFinal">
    <p>
      <b>Jimee, muy bien esa memoria!!</b><br><br>

      Ahora te dejo la ultima pista de esta semana:<br><br>

      No soy quien imagin√°s.<br>
      No miro desde lo alto<br>
      ni llego antes de empezar.<br><br>

      No todo es lo que parece,<br>
      y ah√≠ empieza la verdad.<br><br>

      Espero que tengas una muy linda <b>Feliz Navidaad!!</b> üéÖüçª<br><br>

      att. <b>G.B</b>
    </p>
  </div>
</div>

<div class="contenedor">
  <h2>üß† Juego de Memoria</h2>
  <div class="tablero" id="tablero"></div>
</div>

<script>
const emojis=[
  "üéÑ","üéÅ","üéÖ","‚ùÑÔ∏è","‚õÑ","ü¶å","üç∑","üç™","üîî","‚≠ê",
  "üé∂","üïØÔ∏è","ü•Ç","üç´","üéâ","üì¶","üß£","üß§","üß¶","üåü"
];

let cartas=[], seleccionadas=[], bloqueado=true;
const tablero=document.getElementById("tablero");

function crearCartas(){
  cartas=[];
  emojis.forEach(e=>{
    cartas.push({emoji:e,encontrada:false});
    cartas.push({emoji:e,encontrada:false});
  });
}

function render(){
  tablero.innerHTML="";
  cartas.forEach((c,i)=>{
    const div=document.createElement("div");
    div.className="carta";
    if(c.encontrada){
      div.classList.add("volteada","bloqueada","acertada");
    }
    div.dataset.index=i;
    div.innerHTML=`
      <div class="inner">
        <div class="cara atras"></div>
        <div class="cara frente">${c.emoji}</div>
      </div>`;
    div.onclick=()=>clickCarta(div);
    tablero.appendChild(div);
  });
}

function comenzar(){
  document.getElementById("overlayInicio").style.display="none";
  iniciarJuego();
}

function iniciarJuego(){
  bloqueado=true;
  crearCartas();
  cartas.sort(()=>Math.random()-0.5);
  render();
  preview();
}

function preview(){
  document.querySelectorAll(".carta").forEach(c=>c.classList.add("volteada"));
  setTimeout(()=>{
    document.querySelectorAll(".carta").forEach(c=>c.classList.remove("volteada"));
    bloqueado=false;
  },5000);
}

function clickCarta(el){
  if(bloqueado) return;
  const i=el.dataset.index;
  if(cartas[i].encontrada||seleccionadas.includes(el)) return;

  el.classList.add("volteada","seleccionada");
  seleccionadas.push(el);

  if(seleccionadas.length===2) verificar();
}

function verificar(){
  bloqueado=true;
  const [a,b]=seleccionadas;
  const ca=cartas[a.dataset.index];
  const cb=cartas[b.dataset.index];

  if(ca.emoji===cb.emoji){
    ca.encontrada=cb.encontrada=true;
    a.classList.add("bloqueada","acertada");
    b.classList.add("bloqueada","acertada");
    a.classList.remove("seleccionada");
    b.classList.remove("seleccionada");
    seleccionadas=[];
    bloqueado=false;
    verificarVictoria();
  }else{
    setTimeout(()=>{
      a.classList.remove("volteada","seleccionada");
      b.classList.remove("volteada","seleccionada");
      seleccionadas=[];
      bloqueado=false;
    },800);
  }
}

function verificarVictoria(){
  if(cartas.every(c=>c.encontrada)){
    lanzarConfeti();
    setTimeout(()=>{
      document.getElementById("overlayFinal").style.display="flex";
      const modal=document.getElementById("modalFinal");
      setTimeout(()=>modal.classList.add("visible"),200);
    },2500);
  }
}

/* CONFETI */
function lanzarConfeti(){
  for(let i=0;i<120;i++){
    const c=document.createElement("div");
    c.className="confeti";
    c.style.left=Math.random()*100+"vw";
    c.style.background=`hsl(${Math.random()*360},80%,60%)`;
    c.style.animationDuration=2+Math.random()*2+"s";
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),4000);
  }
}
</script>

</body>
</html>
