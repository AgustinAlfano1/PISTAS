<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sopa de Letras</title>
  <link rel="icon" href="data:image/svg+xml,
<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22>
<text y=%22.9em%22 font-size=%2290%22>üéÑ</text>
</svg>">
<style>
body{
  margin:0;
  min-height:100vh;
  font-family:Arial, Helvetica, sans-serif;

  background-image: url("fondo-navidad.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  display:flex;
  justify-content:center;
  align-items:center;
}
.contenedor{
  background:white;
  padding:20px;
  border-radius:16px;
  max-width:520px;
  width:95%;
  box-shadow:0 8px 20px rgba(0,0,0,.25);
  text-align:center;
}

h2{margin:0 0 10px 0;}

.grilla{
display:grid;
grid-template-columns:repeat(10,1fr);
gap:4px;
margin:10px auto;
user-select:none;
}
.celda{
border:1px solid #ccc;
width:32px;
height:32px;
display:flex;
justify-content:center;
align-items:center;
font-weight:bold;
cursor:pointer;
}
.celda.seleccionada{background:#bbdefb;}
.celda.correcta{background:#66bb6a;color:white;}

.pistas{
text-align:left;
font-size:14px;
margin-top:15px;
}
.pistas li{margin-bottom:6px;}

.mensaje-final{
display:none;
margin-top:20px;
padding:15px;
background:white;
border-radius:10px;
color:green;
font-weight:bold;
}

.siguiente{
display:none;
margin-top:12px;
padding:10px 20px;
font-size:16px;
cursor:pointer;
}
.overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,0.6);
display:flex;
justify-content:center;
align-items:center;
z-index:1000;
}
.modal{
background:white;
padding:20px;
border-radius:16px;
max-width:420px;
text-align:center;
box-shadow:0 10px 25px rgba(0,0,0,0.3);
}
.modal button{
margin-top:15px;
padding:10px 20px;
font-size:16px;
cursor:pointer;
} </style>

</head>
<body>

<div class="overlay" id="overlay">
  <div class="modal">
    <p><strong>Bienvenida a la pr√≥xima pista!</strong><br><br>
    Como podr√°s ver es una <b>Sopa de Letras</b>!!<br><br>
    Para poder marcar las palabras encontradas deber√°s mantener el click y arrastrar sobre las letras que formen tu palabra!<br><br>
    Suerte!! üòÅ</p>
    <button onclick="cerrarAviso()">Aceptar</button>
  </div>
</div>

<div class="contenedor" style="display:none" id="juego">

  <div class="grilla" id="grilla"></div>

  <ul class="pistas">
    <li>Primer dia de la semana.</li>
    <li>Lo hago todos los d√≠as, varias veces, sin m√≠ el cuerpo se queja y pierde fuerzas. Empieza cuando tengo hambre y termina cuando el plato queda vac√≠o.</li>
    <li>Soy lo contrario de mal, cuando todo sale como debe ser. Me usan para decir que algo est√° correcto y tambi√©n para sentirse mejor.</li>
    <li>Vengo antes que el pollito, suelo estar en la sart√©n o en el nido. Soy blanco por fuera, amarillo por dentro, y en el desayuno soy muy querido.</li>
    <li>Es un nombre propio, ex presidente de Argentina entre 2003 y 2007.</li>
    <li>Es un animal peque√±o, parecido a un rat√≥n pero m√°s grande, tiene cola larga, y vive en la ciudad.</li>
    <li>Nac√≠ en internet y viajo sin parar, con una imagen y texto te puedo hacer re√≠r o pensar. Tambi√©n me definen como una imagen graciosa de internet que hace re√≠r a todos.</li>
  </ul>

  <div class="mensaje-final" id="mensajeFinal">
    Muy bien Jime, espero hayas disfrutado el juego! Si ves cada palabra descubierta notar√°s que te hace recordar a un meme que ambos solemos apreciar!! Buen lunes!! Dale a siguiente para finalizar la pista!
  </div>

<button class="siguiente" id="btnSiguiente" onclick="irSiguiente()">Siguiente</button>

</div>

<script>
const palabras = ["COMER","BIEN","HUEVOS","NESTOR","RATA","MEME","LUNES"];

const grillaLetras = [
  "R Z V K B N C V K B",
  "O Z H M R A T A I E",
  "H M G U P V X E I X",
  "E M G O E B N Z R L",
  "M E J K S V P C Z U",
  "D M J Y R H O A C N",
  "I E R O B U L S O E",
  "N E S T O R P T M S",
  "O N J X X P M T E P",
  "A D L M J J E E R B"
].map(r=>r.split(" "));

const grilla=document.getElementById("grilla");
let seleccion=[];
let presionado=false;
let palabrasEncontradas=new Set();

function crearGrilla(){
  grillaLetras.flat().forEach(letra=>{
    const d=document.createElement("div");
    d.className="celda";
    d.textContent=letra;

    d.addEventListener("mousedown",()=>{presionado=true;seleccionar(d);});
    d.addEventListener("mouseenter",()=>presionado&&seleccionar(d));
    document.addEventListener("mouseup",soltar);

    d.addEventListener("touchstart",e=>{e.preventDefault();presionado=true;seleccionar(d);});
    d.addEventListener("touchmove",e=>{
      const t=document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY);
      if(t&&t.classList.contains("celda")) seleccionar(t);
    });
    document.addEventListener("touchend",soltar);

    grilla.appendChild(d);
  });
}

function seleccionar(celda){
  if(!seleccion.includes(celda)&&!celda.classList.contains("correcta")){
    celda.classList.add("seleccionada");
    seleccion.push(celda);
  }
}

function soltar(){
  if(!presionado) return;
  presionado=false;

  const palabra=seleccion.map(c=>c.textContent).join("");
  const invertida=palabra.split("").reverse().join("");

  let encontrada=null;
  palabras.forEach(p=>{
    if(p===palabra||p===invertida) encontrada=p;
  });

  if(encontrada&&!palabrasEncontradas.has(encontrada)){
    seleccion.forEach(c=>c.classList.replace("seleccionada","correcta"));
    palabrasEncontradas.add(encontrada);
    verificarFin();
  }else{
    seleccion.forEach(c=>c.classList.remove("seleccionada"));
  }
  seleccion=[];
}

function verificarFin(){
  if(palabrasEncontradas.size===palabras.length){
    document.getElementById("mensajeFinal").style.display="block";
    document.getElementById("btnSiguiente").style.display="inline-block";
  }
}

function cerrarAviso(){
  document.getElementById("overlay").style.display="none";
  document.getElementById("juego").style.display="block";
}

function irSiguiente(){
  window.location.href="https://www.youtube.com/watch?v=cGacttSjLZQ";
}

crearGrilla();
</script>

</body>
</html>
